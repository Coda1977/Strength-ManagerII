<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Strengths Manager - Dashboard</title>
    <style>
        :root {
            --bg-primary: #F5F0E8;
            --text-primary: #1A1A1A;
            --accent-yellow: #FFD60A;
            --accent-blue: #003566;
            --text-secondary: #4A4A4A;
            --white: #FFFFFF;
            
            /* Standardized spacing */
            --nav-padding: 1rem 2rem;
            --card-padding: 2.5rem;
            --modal-padding: 2.5rem;
            --input-padding: 1rem 1.5rem;
            --content-padding: 2rem;
            
            /* Standardized radius */
            --btn-radius: 25px;
            --card-radius: 20px;
            --input-radius: 12px;
            --pill-radius: 28px;
            
            /* Modal sizes */
            --modal-width: 600px;
            
            /* Button padding */
            --btn-padding-sm: 0.5rem 1rem;
            --btn-padding-md: 0.75rem 1.5rem;
            --btn-padding-lg: 1rem 2rem;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* Navigation */
        .app-nav {
            background: var(--white);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: var(--nav-padding);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 24px;
            font-weight: 900;
            letter-spacing: -1px;
            color: var(--text-primary);
        }

        .nav-menu {
            display: flex;
            gap: 2rem;
            align-items: center;
        }

        .nav-item {
            background: none;
            border: none;
            font-size: 16px;
            font-weight: 600;
            color: var(--text-secondary);
            cursor: pointer;
            padding: var(--btn-padding-sm);
            border-radius: var(--btn-radius);
            transition: all 0.3s ease;
            position: relative;
        }

        .nav-item:hover {
            color: var(--text-primary);
            background: var(--bg-primary);
        }

        .nav-item.active {
            color: var(--text-primary);
            background: var(--accent-yellow);
        }

        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--text-primary);
        }

        /* Main Content Area */
        .app-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: var(--content-padding);
            min-height: calc(100vh - 80px);
        }

        /* Page Sections */
        .page-section {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .page-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Dashboard Styles */
        .dashboard-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .dashboard-header h1 {
            font-size: 48px;
            font-weight: 900;
            letter-spacing: -2px;
            margin-bottom: 0.5rem;
        }

        .dashboard-header p {
            color: var(--text-secondary);
            font-size: 18px;
        }

        .card {
            background: var(--white);
            border-radius: var(--card-radius);
            padding: var(--card-padding);
            margin-bottom: var(--content-padding);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
        }

        .card-title {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 1.5rem;
            letter-spacing: -1px;
        }

        /* Manager Strengths */
        .strengths-list {
            display: flex;
            flex-wrap: wrap;
            gap: 0.75rem;
            margin-bottom: 1rem;
        }

        .strength-pill {
            background: var(--accent-yellow);
            color: var(--text-primary);
            padding: var(--btn-padding-sm);
            border-radius: var(--btn-radius);
            font-weight: 600;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .edit-btn, .action-btn {
            background: var(--accent-blue);
            color: var(--white);
            border: none;
            padding: var(--btn-padding-md);
            border-radius: var(--btn-radius);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 1rem;
        }

        .edit-btn:hover, .action-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 53, 102, 0.3);
        }

        /* Team Synergy */
        .team-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: var(--content-padding);
        }

        .team-member-card {
            background: var(--bg-primary);
            padding: 1.5rem;
            border-radius: 15px;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
        }

        .team-member-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .team-member-card.selected {
            background: var(--accent-yellow);
            transform: scale(1.05);
        }

        .member-header {
            display: flex;
            align-items: center;
            margin-bottom: 1rem;
        }

        .member-initials {
            width: 48px;
            height: 48px;
            background: var(--accent-blue);
            color: var(--white);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 18px;
            margin-right: 0.75rem;
        }

        .member-name {
            font-weight: 600;
            font-size: 16px;
        }

        .member-strengths {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .small-strength {
            background: var(--white);
            padding: 0.25rem 0.75rem;
            border-radius: 15px;
            font-size: 14px;
            text-align: center;
        }

        .add-member-card {
            background: transparent;
            border: 3px dashed var(--accent-blue);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .add-member-card:hover {
            background: var(--accent-blue);
            border-color: var(--accent-blue);
            color: var(--white);
        }

        .add-icon {
            font-size: 48px;
            font-weight: 300;
        }

        .delete-btn {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            background: #ff4444;
            color: white;
            border: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            cursor: pointer;
            opacity: 0;
            transition: opacity 0.3s ease;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .team-member-card:hover .delete-btn {
            opacity: 1;
        }

        /* Domain Distribution */
        .domain-chart {
            margin-top: var(--content-padding);
        }

        .domain-bar {
            margin-bottom: 1rem;
        }

        .domain-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .bar-container {
            background: var(--bg-primary);
            height: 30px;
            border-radius: 15px;
            overflow: hidden;
        }

        .bar-fill {
            height: 100%;
            transition: width 0.5s ease;
        }

        .executing { background: #e74c3c; }
        .influencing { background: #f39c12; }
        .relationship { background: #3498db; }
        .strategic { background: #9b59b6; }

        /* Insights */
        .insight-section {
            margin-bottom: var(--content-padding);
        }

        .insight-box {
            background: var(--bg-primary);
            padding: 1.5rem;
            border-radius: 15px;
            margin-bottom: 1rem;
        }

        .insight-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .insight-title {
            font-weight: 700;
            font-size: 20px;
        }

        .refresh-btn {
            background: var(--accent-blue);
            color: var(--white);
            border: none;
            padding: var(--btn-padding-sm);
            border-radius: var(--card-radius);
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .refresh-btn:hover:not(:disabled) {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 53, 102, 0.3);
        }

        .refresh-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .insight-text {
            color: var(--text-secondary);
            line-height: 1.8;
        }

        .collaboration-section {
            margin-top: var(--content-padding);
        }

        .collaboration-prompt {
            color: var(--text-secondary);
            margin-bottom: 1rem;
        }

        .selected-members {
            background: var(--accent-yellow);
            padding: 1rem;
            border-radius: 10px;
            margin-bottom: 1rem;
            font-weight: 600;
        }

        /* Member selection buttons in insights */
        .member-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 0.75rem;
            margin: 1rem 0;
        }

        .member-btn {
            background: var(--bg-primary);
            border: 2px solid transparent;
            padding: var(--btn-padding-md);
            border-radius: var(--btn-radius);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .member-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .member-btn.selected {
            background: var(--accent-yellow);
            border-color: var(--accent-blue);
            transform: scale(1.05);
        }

        /* Encyclopedia Section */
        .encyclopedia-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .encyclopedia-header h1 {
            font-size: 48px;
            font-weight: 900;
            letter-spacing: -2px;
            margin-bottom: 0.5rem;
        }

        .search-container {
            max-width: 600px;
            margin: 0 auto 3rem;
        }

        .search-input {
            width: 100%;
            padding: var(--input-padding);
            border: 2px solid var(--bg-primary);
            border-radius: 30px;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--accent-blue);
        }

        .domain-filter {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: var(--content-padding);
            flex-wrap: wrap;
        }

        .filter-btn {
            background: var(--white);
            border: 2px solid var(--bg-primary);
            padding: var(--btn-padding-sm);
            border-radius: var(--btn-radius);
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .filter-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .filter-btn.active {
            background: var(--accent-yellow);
            border-color: var(--accent-yellow);
        }

        .strengths-encyclopedia {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        .strength-card {
            background: var(--white);
            padding: var(--content-padding);
            border-radius: 15px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .strength-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
        }

        .strength-title {
            font-size: 22px;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .strength-domain {
            font-size: 14px;
            color: var(--text-secondary);
            margin-bottom: 1rem;
        }

        .strength-description {
            color: var(--text-secondary);
            line-height: 1.6;
        }

        /* AI Chat Section */
        .ai-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .ai-header h1 {
            font-size: 48px;
            font-weight: 900;
            letter-spacing: -2px;
            margin-bottom: 0.5rem;
        }

        .chat-container {
            max-width: 800px;
            margin: 0 auto;
            background: var(--white);
            border-radius: var(--card-radius);
            height: 600px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: var(--content-padding);
        }

        .message {
            margin-bottom: 1.5rem;
            display: flex;
            gap: 1rem;
        }

        .message.user {
            flex-direction: row-reverse;
        }

        .message-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--accent-blue);
            color: var(--white);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            flex-shrink: 0;
        }

        .message.user .message-avatar {
            background: var(--accent-yellow);
            color: var(--text-primary);
        }

        .message-content {
            background: var(--bg-primary);
            padding: var(--input-padding);
            border-radius: 15px;
            max-width: 70%;
        }

        .message.user .message-content {
            background: var(--accent-blue);
            color: var(--white);
        }

        .chat-input-container {
            padding: 1.5rem;
            border-top: 1px solid var(--bg-primary);
            display: flex;
            gap: 1rem;
        }

        .chat-input {
            flex: 1;
            padding: var(--btn-padding-md);
            border: 2px solid var(--bg-primary);
            border-radius: var(--btn-radius);
            font-size: 16px;
            resize: none;
            outline: none;
        }

        .chat-input:focus {
            border-color: var(--accent-blue);
        }

        .send-btn {
            background: var(--accent-blue);
            color: var(--white);
            border: none;
            padding: var(--btn-padding-md);
            border-radius: var(--btn-radius);
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .send-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 53, 102, 0.3);
        }

        /* Loading Spinner */
        .spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(0, 0, 0, 0.1);
            border-radius: 50%;
            border-top-color: var(--accent-blue);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            animation: fadeIn 0.3s ease;
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background-color: var(--white);
            padding: var(--modal-padding);
            border-radius: var(--card-radius);
            max-width: var(--modal-width);
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--content-padding);
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 28px;
            cursor: pointer;
            color: var(--text-secondary);
        }

        .strength-input {
            width: 100%;
            padding: var(--btn-padding-md);
            border: 2px solid var(--bg-primary);
            border-radius: 10px;
            font-size: 16px;
            margin-bottom: 1rem;
        }

        .strength-options {
            max-height: 200px;
            overflow-y: auto;
            border: 2px solid var(--bg-primary);
            border-radius: 10px;
            margin-bottom: 1rem;
        }

        .strength-option {
            padding: var(--btn-padding-md);
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .strength-option:hover {
            background: var(--bg-primary);
        }

        .selected-strengths {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .selected-strength {
            background: var(--accent-yellow);
            padding: var(--btn-padding-sm);
            border-radius: var(--card-radius);
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .remove-strength {
            cursor: pointer;
            font-weight: bold;
        }

        /* Mobile Styles */
        @media (max-width: 768px) {
            .nav-container {
                padding: 1rem;
            }

            .nav-menu {
                display: none;
                position: absolute;
                top: 100%;
                left: 0;
                right: 0;
                background: var(--white);
                flex-direction: column;
                padding: 1rem;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            }

            .nav-menu.active {
                display: flex;
            }

            .mobile-menu-btn {
                display: block;
            }

            .app-content {
                padding: 1rem;
            }

            .card {
                padding: 1.5rem;
            }

            .dashboard-header h1,
            .encyclopedia-header h1,
            .ai-header h1 {
                font-size: 36px;
            }

            .team-grid {
                grid-template-columns: 1fr;
            }

            .strengths-encyclopedia {
                grid-template-columns: 1fr;
            }

            .chat-container {
                height: 500px;
            }

            .message-content {
                max-width: 85%;
            }

            .domain-bar {
                margin-bottom: 1.5rem;
            }

            .domain-label {
                font-size: 14px;
            }

            .bar-container {
                height: 25px;
            }

            .strength-pill {
                font-size: 14px;
                padding: 0.4rem 1rem;
            }

            .edit-btn, .refresh-btn, .action-btn {
                font-size: 14px;
                padding: 0.6rem 1.2rem;
            }
        }

        @media (max-width: 480px) {
            .member-buttons {
                gap: 0.5rem;
            }

            .member-btn {
                padding: 0.6rem 1rem;
                font-size: 14px;
                flex: 0 0 calc(50% - 0.25rem);
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="app-nav">
        <div class="nav-container">
            <div class="logo">Strengths Manager</div>
            <button class="mobile-menu-btn" onclick="toggleMobileMenu()">☰</button>
            <div class="nav-menu" id="navMenu">
                <button class="nav-item active" onclick="showSection('dashboard')">Dashboard</button>
                <button class="nav-item" onclick="showSection('encyclopedia')">Encyclopedia</button>
                <button class="nav-item" onclick="showSection('ai')">AI Coach</button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="app-content">
        <!-- Dashboard Section -->
        <div id="dashboard" class="page-section active">
            <div class="dashboard-header">
                <h1>Team Strengths Dashboard</h1>
                <p>Empower your team through strengths-based leadership</p>
            </div>

            <!-- Manager's Strengths -->
            <div class="card">
                <h2 class="card-title">My Top 5 Strengths</h2>
                <div class="strengths-list" id="managerStrengths">
                    <span class="strength-pill">Strategic</span>
                    <span class="strength-pill">Achiever</span>
                    <span class="strength-pill">Learner</span>
                    <span class="strength-pill">Responsibility</span>
                    <span class="strength-pill">Analytical</span>
                </div>
                <button class="edit-btn" onclick="openEditModal()">Edit Strengths</button>
            </div>

            <!-- Team Synergy -->
            <div class="card">
                <h2 class="card-title">Team Synergy</h2>
                <div class="team-grid" id="teamGrid">
                    <div class="team-member-card" onclick="toggleMemberSelection(this, 'John Doe')">
                        <button class="delete-btn" onclick="deleteMember(event, this)">×</button>
                        <div class="member-header">
                            <div class="member-initials">JD</div>
                            <div class="member-name">John Doe</div>
                        </div>
                        <div class="member-strengths">
                            <span class="small-strength">Communication</span>
                            <span class="small-strength">Empathy</span>
                            <span class="small-strength">Developer</span>
                        </div>
                    </div>
                    <div class="team-member-card" onclick="toggleMemberSelection(this, 'Sarah Smith')">
                        <button class="delete-btn" onclick="deleteMember(event, this)">×</button>
                        <div class="member-header">
                            <div class="member-initials">SS</div>
                            <div class="member-name">Sarah Smith</div>
                        </div>
                        <div class="member-strengths">
                            <span class="small-strength">Focus</span>
                            <span class="small-strength">Competition</span>
                        </div>
                    </div>
                    <div class="add-member-card team-member-card" onclick="openAddMemberModal()">
                        <span class="add-icon">+</span>
                    </div>
                </div>

                <h3 style="font-size: 20px; font-weight: 700; margin-bottom: 1rem; margin-top: 2rem;">Domain Distribution</h3>
                <div class="domain-chart">
                    <div class="domain-bar">
                        <div class="domain-label">
                            <span>Executing</span>
                            <span>35%</span>
                        </div>
                        <div class="bar-container">
                            <div class="bar-fill executing" style="width: 35%"></div>
                        </div>
                    </div>
                    <div class="domain-bar">
                        <div class="domain-label">
                            <span>Influencing</span>
                            <span>25%</span>
                        </div>
                        <div class="bar-container">
                            <div class="bar-fill influencing" style="width: 25%"></div>
                        </div>
                    </div>
                    <div class="domain-bar">
                        <div class="domain-label">
                            <span>Relationship Building</span>
                            <span>30%</span>
                        </div>
                        <div class="bar-container">
                            <div class="bar-fill relationship" style="width: 30%"></div>
                        </div>
                    </div>
                    <div class="domain-bar">
                        <div class="domain-label">
                            <span>Strategic Thinking</span>
                            <span>10%</span>
                        </div>
                        <div class="bar-container">
                            <div class="bar-fill strategic" style="width: 10%"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Insights -->
            <div class="card">
                <h2 class="card-title">Insights</h2>
                
                <div class="insight-section">
                    <div class="insight-box">
                        <div class="insight-header">
                            <h3 class="insight-title">Team Insight</h3>
                            <button class="refresh-btn" onclick="refreshTeamInsight(this)" data-count="0">
                                Refresh (3 left)
                            </button>
                        </div>
                        <p class="insight-text" id="teamInsight">
                            Your team excels in Executing and Relationship Building domains, creating a powerful combination of getting things done while maintaining strong connections. Consider organizing team challenges that leverage both - like collaborative sprints where pairs work together on time-bound projects. This could amplify your collective productivity while strengthening bonds.
                        </p>
                    </div>
                </div>

                <div class="collaboration-section">
                    <p class="collaboration-prompt">Click on two names below to see collaboration insights:</p>
                    <div class="member-buttons" id="insightMemberButtons">
                        <button class="member-btn" onclick="selectForInsight(this, 'You')">You</button>
                        <button class="member-btn" onclick="selectForInsight(this, 'John Doe')">John Doe</button>
                        <button class="member-btn" onclick="selectForInsight(this, 'Sarah Smith')">Sarah Smith</button>
                    </div>
                    <div id="selectedMembersDisplay" style="display: none;">
                        <div class="selected-members" id="selectedNames"></div>
                        <div class="insight-box">
                            <p class="insight-text" id="collaborationInsight"></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Encyclopedia Section -->
        <div id="encyclopedia" class="page-section">
            <div class="encyclopedia-header">
                <h1>Strengths Encyclopedia</h1>
                <p>Explore all 34 CliftonStrengths themes</p>
            </div>

            <div class="search-container">
                <input type="text" class="search-input" placeholder="Search strengths..." onkeyup="searchStrengths(this.value)">
            </div>

            <div class="domain-filter">
                <button class="filter-btn active" onclick="filterByDomain('all')">All</button>
                <button class="filter-btn" onclick="filterByDomain('Executing')">Executing</button>
                <button class="filter-btn" onclick="filterByDomain('Influencing')">Influencing</button>
                <button class="filter-btn" onclick="filterByDomain('Relationship Building')">Relationship</button>
                <button class="filter-btn" onclick="filterByDomain('Strategic Thinking')">Strategic</button>
            </div>

            <div class="strengths-encyclopedia" id="strengthsGrid">
                <!-- Strengths will be populated here -->
            </div>
        </div>

        <!-- AI Coach Section -->
        <div id="ai" class="page-section">
            <div class="ai-header">
                <h1>AI Strengths Coach</h1>
                <p>Get personalized guidance based on your strengths</p>
            </div>

            <div class="chat-container">
                <div class="chat-messages" id="chatMessages">
                    <div class="message">
                        <div class="message-avatar">AI</div>
                        <div class="message-content">
                            Hello! I'm your AI Strengths Coach. I can help you understand how to leverage your strengths, improve team dynamics, and solve challenges using a strengths-based approach. What would you like to explore today?
                        </div>
                    </div>
                </div>
                <div class="chat-input-container">
                    <input type="text" class="chat-input" id="chatInput" placeholder="Type your message..." onkeypress="handleChatKeypress(event)">
                    <button class="send-btn" onclick="sendMessage()">Send</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Strengths Modal -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 style="font-size: 24px; font-weight: 700;">Edit My Strengths</h2>
                <button class="close-modal" onclick="closeEditModal()">&times;</button>
            </div>
            <p style="color: var(--text-secondary); margin-bottom: 1.5rem;">Select your top 5 CliftonStrengths</p>
            
            <input type="text" class="strength-input" placeholder="Search strengths..." onkeyup="filterStrengths(this.value)">
            
            <div class="selected-strengths" id="modalSelectedStrengths"></div>
            
            <div class="strength-options" id="strengthOptions"></div>
            
            <button class="edit-btn" onclick="saveStrengths()" style="width: 100%; margin-top: 1rem;">Save Changes</button>
        </div>
    </div>

    <!-- Add Team Member Modal -->
    <div id="addMemberModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 style="font-size: 24px; font-weight: 700;">Add Team Member</h2>
                <button class="close-modal" onclick="closeAddMemberModal()">&times;</button>
            </div>
            
            <input type="text" class="strength-input" placeholder="Team member name" id="memberName">
            
            <p style="color: var(--text-secondary); margin: 1.5rem 0 1rem;">Select 1-5 strengths for this team member</p>
            
            <input type="text" class="strength-input" placeholder="Search strengths..." onkeyup="filterMemberStrengths(this.value)">
            
            <div class="selected-strengths" id="memberSelectedStrengths"></div>
            
            <div class="strength-options" id="memberStrengthOptions"></div>
            
            <button class="edit-btn" onclick="addTeamMember()" style="width: 100%; margin-top: 1rem;">Add Team Member</button>
        </div>
    </div>

    <script>
        // CliftonStrengths with domains
        const strengthDomains = {
            'Achiever': 'Executing', 'Activator': 'Influencing', 'Adaptability': 'Relationship Building',
            'Analytical': 'Strategic Thinking', 'Arranger': 'Executing', 'Belief': 'Executing',
            'Command': 'Influencing', 'Communication': 'Influencing', 'Competition': 'Influencing',
            'Connectedness': 'Relationship Building', 'Consistency': 'Executing', 'Context': 'Strategic Thinking',
            'Deliberative': 'Executing', 'Developer': 'Relationship Building', 'Discipline': 'Executing',
            'Empathy': 'Relationship Building', 'Focus': 'Executing', 'Futuristic': 'Strategic Thinking',
            'Harmony': 'Relationship Building', 'Ideation': 'Strategic Thinking', 'Includer': 'Relationship Building',
            'Individualization': 'Relationship Building', 'Input': 'Strategic Thinking', 'Intellection': 'Strategic Thinking',
            'Learner': 'Strategic Thinking', 'Maximizer': 'Influencing', 'Positivity': 'Relationship Building',
            'Relator': 'Relationship Building', 'Responsibility': 'Executing', 'Restorative': 'Executing',
            'Self-Assurance': 'Influencing', 'Significance': 'Influencing', 'Strategic': 'Strategic Thinking',
            'Woo': 'Influencing'
        };

        const strengthDescriptions = {
            'Achiever': 'People with Achiever have a constant need for attainment. They feel every day must be productive.',
            'Activator': 'Activators make things happen by turning thoughts into action. They want to do things now.',
            'Adaptability': 'People with Adaptability prefer to go with the flow. They take things as they come.',
            'Analytical': 'Analytical people search for reasons and causes. They think about all factors that might affect a situation.',
            'Arranger': 'Arrangers can organize, but they also have a flexibility that complements this ability.',
            'Belief': 'People with Belief have certain core values that are unchanging.',
            'Command': 'People with Command have presence. They can take control of a situation and make decisions.',
            'Communication': 'Communicators find it easy to put their thoughts into words.',
            'Competition': 'People with Competition measure their progress against the performance of others.',
            'Connectedness': 'People with Connectedness believe things happen for a reason.',
            'Consistency': 'People with Consistency are keenly aware of the need to treat people the same.',
            'Context': 'People with Context enjoy thinking about the past.',
            'Deliberative': 'People with Deliberative are best described by the serious care they take in making decisions.',
            'Developer': 'Developers recognize and cultivate the potential in others.',
            'Discipline': 'People with Discipline enjoy routine and structure.',
            'Empathy': 'People with Empathy can sense other people\'s feelings.',
            'Focus': 'People with Focus can take a direction, follow through, and make corrections.',
            'Futuristic': 'People with Futuristic are inspired by the future and what could be.',
            'Harmony': 'People with Harmony look for consensus and try to avoid conflict.',
            'Ideation': 'People with Ideation are fascinated by ideas.',
            'Includer': 'Includers show awareness of those who feel left out.',
            'Individualization': 'People with Individualization are intrigued by the unique qualities of each person.',
            'Input': 'People with Input have a need to collect and archive.',
            'Intellection': 'People with Intellection are characterized by their intellectual activity.',
            'Learner': 'People with Learner have a great desire to learn and continuously improve.',
            'Maximizer': 'Maximizers focus on strengths to stimulate personal and group excellence.',
            'Positivity': 'People with Positivity have contagious enthusiasm.',
            'Relator': 'Relators enjoy close relationships with others.',
            'Responsibility': 'People with Responsibility take psychological ownership of what they say they will do.',
            'Restorative': 'People with Restorative are adept at dealing with problems.',
            'Self-Assurance': 'People with Self-Assurance feel confident in their ability to take risks.',
            'Significance': 'People with Significance want to make a big impact.',
            'Strategic': 'People with Strategic create alternative ways to proceed.',
            'Woo': 'People with Woo love the challenge of meeting new people and winning them over.'
        };
        
        const allStrengths = Object.keys(strengthDomains);

        let selectedMembers = [];
        let selectedInsightMembers = [];
        let managerStrengthsList = ['Strategic', 'Achiever', 'Learner', 'Responsibility', 'Analytical'];
        let selectedStrengthsTemp = [...managerStrengthsList];
        let memberStrengthsTemp = [];
        let currentSection = 'dashboard';

        // Navigation functions
        function toggleMobileMenu() {
            const navMenu = document.getElementById('navMenu');
            navMenu.classList.toggle('active');
        }

        function showSection(section) {
            // Update active section
            document.querySelectorAll('.page-section').forEach(s => s.classList.remove('active'));
            document.getElementById(section).classList.add('active');
            
            // Update nav buttons
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            event.target.classList.add('active');
            
            // Close mobile menu
            document.getElementById('navMenu').classList.remove('active');
            
            // Initialize section-specific content
            if (section === 'encyclopedia') {
                initializeEncyclopedia();
            }
            
            currentSection = section;
        }

        // Initialize Encyclopedia
        function initializeEncyclopedia() {
            const grid = document.getElementById('strengthsGrid');
            if (grid.children.length === 0) {
                displayStrengths('all');
            }
        }

        function displayStrengths(domain) {
            const grid = document.getElementById('strengthsGrid');
            grid.innerHTML = '';
            
            const strengthsToShow = domain === 'all' 
                ? allStrengths 
                : allStrengths.filter(s => strengthDomains[s] === domain);
            
            strengthsToShow.forEach(strength => {
                const card = document.createElement('div');
                card.className = 'strength-card';
                card.innerHTML = `
                    <h3 class="strength-title">${strength}</h3>
                    <p class="strength-domain">${strengthDomains[strength]}</p>
                    <p class="strength-description">${strengthDescriptions[strength]}</p>
                `;
                grid.appendChild(card);
            });
        }

        function filterByDomain(domain) {
            // Update filter buttons
            document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            displayStrengths(domain);
        }

        function searchStrengths(query) {
            const grid = document.getElementById('strengthsGrid');
            const cards = grid.querySelectorAll('.strength-card');
            
            cards.forEach(card => {
                const title = card.querySelector('.strength-title').textContent.toLowerCase();
                const description = card.querySelector('.strength-description').textContent.toLowerCase();
                const domain = card.querySelector('.strength-domain').textContent.toLowerCase();
                
                if (title.includes(query.toLowerCase()) || 
                    description.includes(query.toLowerCase()) ||
                    domain.includes(query.toLowerCase())) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        }

        // AI Chat functions
        function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            if (!message) return;
            
            // Add user message
            addChatMessage(message, 'user');
            input.value = '';
            
            // Simulate AI response
            setTimeout(() => {
                const response = generateAIResponse(message);
                addChatMessage(response, 'ai');
            }, 1000);
        }

        function handleChatKeypress(event) {
            if (event.key === 'Enter' && !event.shiftKey) {
                event.preventDefault();
                sendMessage();
            }
        }

        function addChatMessage(message, sender) {
            const messagesDiv = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}`;
            
            const avatar = sender === 'user' ? 'You' : 'AI';
            messageDiv.innerHTML = `
                <div class="message-avatar">${avatar}</div>
                <div class="message-content">${message}</div>
            `;
            
            messagesDiv.appendChild(messageDiv);
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        }

        function generateAIResponse(message) {
            const responses = {
                'strengths': 'Based on your Strategic and Analytical strengths, you excel at seeing patterns and creating plans. Try using these together by analyzing data trends first, then developing strategic initiatives based on your findings.',
                'team': 'With your team\'s mix of Executing and Relationship Building strengths, consider implementing pair programming or buddy systems. This leverages both task completion and interpersonal connection.',
                'default': 'That\'s an interesting question! Given your top strengths, I\'d suggest approaching this by first using your Strategic thinking to map out possibilities, then applying your Analytical strength to evaluate each option.'
            };
            
            const lowerMessage = message.toLowerCase();
            if (lowerMessage.includes('strength')) return responses.strengths;
            if (lowerMessage.includes('team')) return responses.team;
            return responses.default;
        }

        // Data persistence functions
        function saveToLocalStorage() {
            const data = {
                managerStrengths: managerStrengthsList,
                teamMembers: []
            };
            
            // Save team members
            const teamCards = document.querySelectorAll('.team-member-card:not(.add-member-card)');
            teamCards.forEach(card => {
                const name = card.querySelector('.member-name').textContent;
                const strengths = Array.from(card.querySelectorAll('.small-strength')).map(s => s.textContent);
                data.teamMembers.push({ name, strengths });
            });
            
            localStorage.setItem('teamStrengthsData', JSON.stringify(data));
        }

        function loadFromLocalStorage() {
            const savedData = localStorage.getItem('teamStrengthsData');
            if (!savedData) return;
            
            const data = JSON.parse(savedData);
            
            // Load manager strengths
            if (data.managerStrengths && data.managerStrengths.length === 5) {
                managerStrengthsList = data.managerStrengths;
                const strengthsHtml = managerStrengthsList.map(s => 
                    `<span class="strength-pill">${s}</span>`
                ).join('');
                document.getElementById('managerStrengths').innerHTML = strengthsHtml;
            }
            
            // Load team members
            if (data.teamMembers && data.teamMembers.length > 0) {
                data.teamMembers.forEach(member => {
                    const initials = member.name.split(' ').map(n => n[0]).join('').toUpperCase();
                    const memberHtml = `
                        <div class="team-member-card" onclick="toggleMemberSelection(this, '${member.name}')">
                            <button class="delete-btn" onclick="deleteMember(event, this)">×</button>
                            <div class="member-header">
                                <div class="member-initials">${initials}</div>
                                <div class="member-name">${member.name}</div>
                            </div>
                            <div class="member-strengths">
                                ${member.strengths.map(s => `<span class="small-strength">${s}</span>`).join('')}
                            </div>
                        </div>
                    `;
                    const addButton = document.querySelector('.add-member-card');
                    addButton.insertAdjacentHTML('beforebegin', memberHtml);
                });
                
                updateInsightButtons();
                updateDomainDistribution();
            }
        }

        // Calculate real domain distribution
        function calculateDomainDistribution() {
            const domainCounts = {
                'Executing': 0,
                'Influencing': 0,
                'Relationship Building': 0,
                'Strategic Thinking': 0
            };
            
            // Count manager strengths
            managerStrengthsList.forEach(strength => {
                const domain = strengthDomains[strength];
                if (domain) domainCounts[domain]++;
            });
            
            // Count team member strengths
            const teamCards = document.querySelectorAll('.team-member-card:not(.add-member-card)');
            teamCards.forEach(card => {
                const strengths = card.querySelectorAll('.small-strength');
                strengths.forEach(s => {
                    const domain = strengthDomains[s.textContent];
                    if (domain) domainCounts[domain]++;
                });
            });
            
            // Calculate total and percentages
            const total = Object.values(domainCounts).reduce((sum, count) => sum + count, 0);
            const percentages = {};
            
            for (const [domain, count] of Object.entries(domainCounts)) {
                percentages[domain] = total > 0 ? Math.round((count / total) * 100) : 0;
            }
            
            return percentages;
        }

        function updateDomainDistribution() {
            const percentages = calculateDomainDistribution();
            
            // Update Executing
            document.querySelector('.executing').style.width = percentages['Executing'] + '%';
            document.querySelector('.executing').parentElement.previousElementSibling.querySelector('span:last-child').textContent = percentages['Executing'] + '%';
            
            // Update Influencing
            document.querySelector('.influencing').style.width = percentages['Influencing'] + '%';
            document.querySelector('.influencing').parentElement.previousElementSibling.querySelector('span:last-child').textContent = percentages['Influencing'] + '%';
            
            // Update Relationship Building
            document.querySelector('.relationship').style.width = percentages['Relationship Building'] + '%';
            document.querySelector('.relationship').parentElement.previousElementSibling.querySelector('span:last-child').textContent = percentages['Relationship Building'] + '%';
            
            // Update Strategic Thinking
            document.querySelector('.strategic').style.width = percentages['Strategic Thinking'] + '%';
            document.querySelector('.strategic').parentElement.previousElementSibling.querySelector('span:last-child').textContent = percentages['Strategic Thinking'] + '%';
            
            // Save after updating
            saveToLocalStorage();
        }

        // Initialize strength options
        function initializeStrengthOptions() {
            const optionsHtml = allStrengths.map(strength => 
                `<div class="strength-option" onclick="toggleStrength('${strength}')">${strength}</div>`
            ).join('');
            document.getElementById('strengthOptions').innerHTML = optionsHtml;
            document.getElementById('memberStrengthOptions').innerHTML = allStrengths.map(strength => 
                `<div class="strength-option" onclick="toggleMemberStrength('${strength}')">${strength}</div>`
            ).join('');
        }

        // Team member selection for insights
        function selectForInsight(btn, memberName) {
            if (btn.classList.contains('selected')) {
                btn.classList.remove('selected');
                selectedInsightMembers = selectedInsightMembers.filter(m => m !== memberName);
            } else if (selectedInsightMembers.length < 2) {
                btn.classList.add('selected');
                selectedInsightMembers.push(memberName);
            } else {
                // If 2 already selected, deselect the first one
                const firstSelected = document.querySelector('.member-btn.selected');
                firstSelected.classList.remove('selected');
                selectedInsightMembers.shift();
                btn.classList.add('selected');
                selectedInsightMembers.push(memberName);
            }

            if (selectedInsightMembers.length === 2) {
                showCollaborationInsight();
            } else {
                document.getElementById('selectedMembersDisplay').style.display = 'none';
            }
        }

        function showCollaborationInsight() {
            document.getElementById('selectedNames').textContent = 
                `${selectedInsightMembers[0]} & ${selectedInsightMembers[1]} Collaboration`;
            document.getElementById('collaborationInsight').innerHTML = 
                '<div class="spinner"></div> Generating insight...';
            document.getElementById('selectedMembersDisplay').style.display = 'block';

            // Simulate AI response
            setTimeout(() => {
                const insights = {
                    "You_John Doe": "Your Strategic strength paired with John's Communication creates a powerful vision-to-execution pipeline. You excel at seeing the big picture while John can translate complex strategies into clear team messages. Try co-leading strategy sessions where you outline the vision and John facilitates team understanding.",
                    "You_Sarah Smith": "Your Analytical nature complements Sarah's Competition perfectly. While you dig deep into data and metrics, Sarah's drive to win can turn insights into competitive advantages. Consider partnering on performance reviews where your analysis meets her results-driven approach.",
                    "John Doe_Sarah Smith": "John's Developer strength combined with Sarah's Focus creates an ideal mentorship dynamic. John naturally sees potential in others while Sarah's intensity can help achieve specific growth targets. They'd excel co-managing intern programs or skill development initiatives."
                };
                
                const key = selectedInsightMembers.sort().join('_');
                const defaultInsight = `${selectedInsightMembers[0]}'s strengths create interesting synergies with ${selectedInsightMembers[1]}'s strengths. Their collaboration could unlock new possibilities for the team through complementary approaches to problem-solving and execution.`;
                
                document.getElementById('collaborationInsight').textContent = insights[key] || defaultInsight;
            }, 1500);
        }

        // Update team member buttons when members are added/removed
        function updateInsightButtons() {
            const container = document.getElementById('insightMemberButtons');
            const teamCards = document.querySelectorAll('.team-member-card:not(.add-member-card)');
            
            let html = '<button class="member-btn" onclick="selectForInsight(this, \'You\')">You</button>';
            
            teamCards.forEach(card => {
                const nameEl = card.querySelector('.member-name');
                if (nameEl) {
                    const name = nameEl.textContent;
                    html += `<button class="member-btn" onclick="selectForInsight(this, '${name}')">${name}</button>`;
                }
            });
            
            container.innerHTML = html;
            selectedInsightMembers = [];
            document.getElementById('selectedMembersDisplay').style.display = 'none';
        }

        // Refresh team insight
        function refreshTeamInsight(btn) {
            const count = parseInt(btn.getAttribute('data-count'));
            if (count >= 3) return;

            const remaining = 2 - count;
            btn.setAttribute('data-count', count + 1);
            btn.textContent = `Refresh (${remaining} left)`;
            
            // Save to localStorage
            localStorage.setItem('refreshCount', count + 1);
            
            if (remaining === 0) {
                btn.disabled = true;
            }

            document.getElementById('teamInsight').innerHTML = '<div class="spinner"></div> Generating new insight...';

            setTimeout(() => {
                const insights = [
                    "Your team's strong Relationship Building presence suggests implementing 'connection rituals' - weekly team check-ins where members share wins using their strengths. Combined with your Executing power, try 'Sprint & Share' sessions where quick wins are celebrated together.",
                    "The blend of Strategic Thinking and Executing domains creates an ideal environment for innovation with implementation. Set up monthly 'Vision to Action' workshops where strategic thinkers outline possibilities and executors create actionable plans.",
                    "Your team shows potential for mentorship pairs - those high in Developer and Learner strengths could create powerful growth partnerships. Consider rotating mentor-mentee relationships quarterly to maximize development."
                ];
                document.getElementById('teamInsight').textContent = insights[count % insights.length];
            }, 1500);
        }

        // Modal functions
        function openEditModal() {
            selectedStrengthsTemp = [...managerStrengthsList];
            updateSelectedStrengthsDisplay();
            document.getElementById('editModal').classList.add('active');
        }

        function closeEditModal() {
            document.getElementById('editModal').classList.remove('active');
        }

        function openAddMemberModal() {
            memberStrengthsTemp = [];
            document.getElementById('memberName').value = '';
            updateMemberStrengthsDisplay();
            document.getElementById('addMemberModal').classList.add('active');
        }

        function closeAddMemberModal() {
            document.getElementById('addMemberModal').classList.remove('active');
        }

        function toggleStrength(strength) {
            if (selectedStrengthsTemp.includes(strength)) {
                selectedStrengthsTemp = selectedStrengthsTemp.filter(s => s !== strength);
            } else if (selectedStrengthsTemp.length < 5) {
                selectedStrengthsTemp.push(strength);
            }
            updateSelectedStrengthsDisplay();
        }

        function updateSelectedStrengthsDisplay() {
            const html = selectedStrengthsTemp.map(s => 
                `<span class="selected-strength">${s} <span class="remove-strength" onclick="removeStrength('${s}')">&times;</span></span>`
            ).join('');
            document.getElementById('modalSelectedStrengths').innerHTML = html;
        }

        function removeStrength(strength) {
            selectedStrengthsTemp = selectedStrengthsTemp.filter(s => s !== strength);
            updateSelectedStrengthsDisplay();
        }

        function saveStrengths() {
            if (selectedStrengthsTemp.length !== 5) {
                alert('Please select exactly 5 strengths');
                return;
            }
            managerStrengthsList = [...selectedStrengthsTemp];
            const strengthsHtml = managerStrengthsList.map(s => 
                `<span class="strength-pill">${s}</span>`
            ).join('');
            document.getElementById('managerStrengths').innerHTML = strengthsHtml;
            closeEditModal();
            updateDomainDistribution();
        }

        // Add team member functions
        function toggleMemberStrength(strength) {
            if (memberStrengthsTemp.includes(strength)) {
                memberStrengthsTemp = memberStrengthsTemp.filter(s => s !== strength);
            } else if (memberStrengthsTemp.length < 5) {
                memberStrengthsTemp.push(strength);
            }
            updateMemberStrengthsDisplay();
        }

        function updateMemberStrengthsDisplay() {
            const html = memberStrengthsTemp.map(s => 
                `<span class="selected-strength">${s} <span class="remove-strength" onclick="removeMemberStrength('${s}')">&times;</span></span>`
            ).join('');
            document.getElementById('memberSelectedStrengths').innerHTML = html;
        }

        function removeMemberStrength(strength) {
            memberStrengthsTemp = memberStrengthsTemp.filter(s => s !== strength);
            updateMemberStrengthsDisplay();
        }

        function addTeamMember() {
            const name = document.getElementById('memberName').value.trim();
            if (!name) {
                alert('Please enter team member name');
                return;
            }
            if (memberStrengthsTemp.length === 0) {
                alert('Please select at least one strength');
                return;
            }

            const initials = name.split(' ').map(n => n[0]).join('').toUpperCase();
            const newMemberHtml = `
                <div class="team-member-card" onclick="toggleMemberSelection(this, '${name}')">
                    <button class="delete-btn" onclick="deleteMember(event, this)">×</button>
                    <div class="member-header">
                        <div class="member-initials">${initials}</div>
                        <div class="member-name">${name}</div>
                    </div>
                    <div class="member-strengths">
                        ${memberStrengthsTemp.map(s => `<span class="small-strength">${s}</span>`).join('')}
                    </div>
                </div>
            `;

            const addButton = document.querySelector('.add-member-card');
            addButton.insertAdjacentHTML('beforebegin', newMemberHtml);
            closeAddMemberModal();
            updateDomainDistribution();
            updateInsightButtons();
        }

        function deleteMember(event, btn) {
            event.stopPropagation();
            if (confirm('Remove this team member?')) {
                btn.closest('.team-member-card').remove();
                updateDomainDistribution();
                updateInsightButtons();
            }
        }

        // Filter functions
        function filterStrengths(query) {
            const options = document.querySelectorAll('#strengthOptions .strength-option');
            options.forEach(option => {
                if (option.textContent.toLowerCase().includes(query.toLowerCase())) {
                    option.style.display = 'block';
                } else {
                    option.style.display = 'none';
                }
            });
        }

        function filterMemberStrengths(query) {
            const options = document.querySelectorAll('#memberStrengthOptions .strength-option');
            options.forEach(option => {
                if (option.textContent.toLowerCase().includes(query.toLowerCase())) {
                    option.style.display = 'block';
                } else {
                    option.style.display = 'none';
                }
            });
        }

        // Initialize on load
        initializeStrengthOptions();
        loadFromLocalStorage();

        // Save refresh count to localStorage
        const savedRefreshCount = localStorage.getItem('refreshCount');
        const savedRefreshDate = localStorage.getItem('refreshDate');
        const today = new Date().toDateString();
        
        if (savedRefreshDate !== today) {
            // Reset count for new day
            localStorage.setItem('refreshDate', today);
            localStorage.setItem('refreshCount', '0');
        } else if (savedRefreshCount) {
            // Restore count for today
            const refreshBtn = document.querySelector('.refresh-btn');
            const count = parseInt(savedRefreshCount);
            refreshBtn.setAttribute('data-count', count);
            refreshBtn.textContent = `Refresh (${3 - count} left)`;
            if (count >= 3) {
                refreshBtn.disabled = true;
            }
        }

        // Close modals when clicking outside
        window.onclick = function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.classList.remove('active');
            }
        }

        // Handle team member selection (for visual feedback only - not used for insights anymore)
        function toggleMemberSelection(card, memberName) {
            // This function is kept for potential future use but insights now use buttons
        }
    </script>
</body>
</html>